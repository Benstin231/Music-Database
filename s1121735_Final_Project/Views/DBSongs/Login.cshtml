@{
    ViewData["Title"] = "登入 - 我的音樂庫";
    Layout = null; // 移除預設 Layout
}

<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --card-shadow: 0 20px 40px rgba(0,0,0,0.1);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --label-gradient: linear-gradient(135deg, #e6f3ff 0%, #ffffff 100%);
        }

        body {
            background: var(--primary-gradient);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            /* 動態背景 */
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
                z-index: -1;
                animation: float 20s ease-in-out infinite;
            }

        @@keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }

            33% {
                transform: translateY(-10px) rotate(1deg);
            }

            66% {
                transform: translateY(5px) rotate(-1deg);
            }
        }

        /* 音樂符號動畫 */
        .music-notes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }

        .note {
            position: absolute;
            font-size: 24px;
            color: rgba(255, 255, 255, 0.1);
            animation: musicFloat 18s linear infinite;
        }

        @@keyframes musicFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* 主要容器 */
        .main-container {
            width: 100%;
            max-width: 450px;
            padding: 2rem 1rem;
        }

        /* 玻璃效果卡片 */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            padding: 0rem 2.5rem 3rem 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

            .glass-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            }

            .glass-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 2px;
                background: var(--primary-gradient);
            }

        /* 標題樣式 */
        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            background: var(--label-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-direction: column;
        }

        .title-icon {
            font-size: 4rem;
            color: white;
            animation: pulse 2s ease-in-out infinite;
            margin-bottom: 0.5rem;
        }

        @@keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* 表單樣式 */
        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-label {
            color: #e6f3ff;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .label-icon {
            color: white;
        }

        .form-control {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            color: white;
            padding: 15px 20px;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
        }

            .form-control:focus {
                background: rgba(255, 255, 255, 0.3);
                border-color: #667eea;
                box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
                color: white;
                outline: none;
            }

            .form-control::placeholder {
                color: rgba(255, 255, 255, 0.6);
            }

        /* 按鈕樣式 */
        .btn-container {
            text-align: center;
            margin-top: 2rem;
        }

        .btn-login {
            background: var(--primary-gradient);
            border: none;
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 200px;
        }

            .btn-login:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
                color: white;
            }

            .btn-login::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
                transition: left 0.5s;
            }

            .btn-login:hover::before {
                left: 100%;
            }

        /* 成功/錯誤訊息樣式 */
        .alert-custom {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
            color: white;
            animation: slideDown 0.5s ease-out;
        }

        .alert-success {
            border-color: rgba(46, 204, 113, 0.5);
            background: rgba(46, 204, 113, 0.1);
            color: #2ecc71;
        }

        .alert-danger {
            border-color: rgba(255, 107, 107, 0.5);
            background: rgba(255, 107, 107, 0.1);
            color: darkred;
        }

        @@keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 響應式設計 */
        @@media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }

            .glass-card {
                padding: 2rem 1.5rem;
            }

            .page-title {
                font-size: 2rem;
            }

            .title-icon {
                font-size: 3rem;
            }
        }

        /* 載入動畫 */
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }

        @@keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 輸入框圖示 */
        .input-group {
            position: relative;
        }

        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.1rem;
            pointer-events: none;
            z-index: 2;
        }

        .form-control:focus + .input-icon {
            color: #667eea;
        }

        /* 登入中動畫 */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 0.5rem;
        }

        @@keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- 音樂符號背景動畫 -->
    <div class="music-notes">
        <div class="note" style="left: 15%; animation-delay: 0s;">♪</div>
        <div class="note" style="left: 25%; animation-delay: 3s;">♫</div>
        <div class="note" style="left: 35%; animation-delay: 6s;">♪</div>
        <div class="note" style="left: 45%; animation-delay: 9s;">♬</div>
        <div class="note" style="left: 55%; animation-delay: 12s;">♪</div>
        <div class="note" style="left: 65%; animation-delay: 15s;">♫</div>
        <div class="note" style="left: 75%; animation-delay: 18s;">♪</div>
        <div class="note" style="left: 85%; animation-delay: 21s;">♬</div>
    </div>

    <div class="main-container">
        <div class="glass-card fade-in">
            <!-- 頁面標題 -->
            <h1 class="page-title">
                <i class="fas fa-headphones title-icon"></i>
                帳號登入
            </h1>
            <p class="subtitle">
                <i class="fas fa-music"></i>
                歡迎回到你的音樂世界
            </p>

            <!-- 訊息提示 -->
            @if (TempData["message"] != null)
            {
                <div id="messageAlert" class="alert-custom alert-danger">
                    <i class="fas fa-exclamation-circle"></i>
                    @TempData["message"]
                </div>
            }

            <!-- 登入表單 -->
            <form action="@Url.Action("Login")" method="post" id="loginForm">
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user label-icon"></i>
                        帳號
                    </label>
                    <div class="input-group">
                        @Html.TextBox("Username", "", new
                            {
                                @class = "form-control",
                                placeholder = "請輸入你的帳號...",
                                required = "required"
                            })
                        <i class="fas fa-user-circle input-icon"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock label-icon"></i>
                        密碼
                    </label>
                    <div class="input-group">
                        @Html.Password("Password", "", new
                            {
                                @class = "form-control",
                                placeholder = "請輸入你的密碼...",
                                required = "required"
                            })
                        <i class="fas fa-key input-icon"></i>
                    </div>
                </div>

                <!-- 登入按鈕 -->
                <div class="btn-container">
                    <button type="submit" class="btn-login" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        登入
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // 表單提交動畫
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            const loginBtn = document.getElementById('loginBtn');
            const originalContent = loginBtn.innerHTML;

            // 設定載入狀態
            loginBtn.innerHTML = '<span class="spinner"></span>登入中...';
            loginBtn.disabled = true;
            loginBtn.classList.add('loading');

            // 如果登入失敗，恢復按鈕狀態
            setTimeout(() => {
                // 檢查是否還在同一頁面（表示登入失敗）
                if (window.location.href.includes('Login')) {
                    loginBtn.innerHTML = originalContent;
                    loginBtn.disabled = false;
                    loginBtn.classList.remove('loading');
                }
            }, 3000);
        });

        // 音樂符號動畫隨機化
        function randomizeNotes() {
            const notes = document.querySelectorAll('.note');
            notes.forEach(note => {
                const randomDelay = Math.random() * 24;
                note.style.animationDelay = randomDelay + 's';
                note.style.left = Math.random() * 85 + 10 + '%';
            });
        }

        // 頁面載入完成後執行
        window.addEventListener('load', function() {
            randomizeNotes();

            // 每30秒重新隨機化音樂符號位置
            setInterval(randomizeNotes, 30000);
        });

        // 即時輸入驗證
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    this.style.borderColor = '#2ecc71';
                } else {
                    this.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                }
            });

            input.addEventListener('focus', function() {
                this.parentNode.querySelector('.input-icon').style.color = '#667eea';
            });

            input.addEventListener('blur', function() {
                this.parentNode.querySelector('.input-icon').style.color = 'rgba(255, 255, 255, 0.6)';
            });
        });

        // 自動隱藏訊息
        const messageAlert = document.getElementById('messageAlert');
        if (messageAlert) {
            setTimeout(() => {
                messageAlert.style.opacity = '0';
                setTimeout(() => {
                    messageAlert.style.display = 'none';
                }, 300);
            }, 5000);
        }

        // Enter 鍵提交表單
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('loginForm').submit();
            }
        });
    </script>
</body>
</html>